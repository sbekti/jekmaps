!function t(o,e,n){function i(s,r){if(!e[s]){if(!o[s]){var l="function"==typeof require&&require;if(!r&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=e[s]={exports:{}};o[s][0].call(p.exports,function(t){var e=o[s][1][t];return i(e?e:t)},p,p.exports,t,o,e,n)}return e[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,o,e){function n(t){var o={lat:t.lat,lng:t.lng};r.emit("location",o)}function i(t,o){var e=null;return o.forEach(function(o,n,i){o.data.driverName==t.driverName&&o.data.driverNoTelp==t.driverNoTelp&&(e=o)}),e}var a,s,r=(t("./lib/bouncemarker"),t("./lib/usermarker"),t("./lib/easybutton"),io()),l=!1,c=!0,p=[];L.mapbox.accessToken="pk.eyJ1IjoibWFwYm94IiwiYSI6IlhHVkZmaW8ifQ.hAMX5hSW-QnTeRCMAy9A8Q";var h=L.mapbox.map("map",null,{attributionControl:!1}).setView([-6.886831823908739,107.61399149894714],16).addControl(L.mapbox.geocoderControl("mapbox.places"));L.control.layers({"Mapbox OSM Bright 2":L.mapbox.tileLayer("mapbox.osm-bright").addTo(h),"Mapbox Streets":L.mapbox.tileLayer("mapbox.streets"),"Mapbox Streets Satellite":L.mapbox.tileLayer("mapbox.streets-satellite"),"Mapbox Satellite":L.mapbox.tileLayer("mapbox.satellite"),"Mapbox Light":L.mapbox.tileLayer("mapbox.light"),"Mapbox Dark":L.mapbox.tileLayer("mapbox.dark"),"Mapbox Pirates":L.mapbox.tileLayer("mapbox.pirates"),"Mapbox Comic":L.mapbox.tileLayer("mapbox.comic"),"Mapbox Wheatpaste":L.mapbox.tileLayer("mapbox.wheatpaste"),OpenStreetMap:L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png"),"Stamen Toner":L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"),"Stamen Watercolor":L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png")}).addTo(h),L.easyButton("fa-location-arrow",function(t,o){o.setView(a,16)}).addTo(h),h.on("moveend",function(t){n(h.getCenter())}),h.on("zoomend",function(t){n(h.getCenter())}),h.on("popupopen",function(t){l=!0}),h.on("popupclose",function(t){l=!1}),r.on("drivers",function(t){if(0!=p.length)for(var o=0;o<t.length;++o){var e=i(t[o],p);if(null!=e){var n=t[o].driverLatLong.split(",")[0],a=t[o].driverLatLong.split(",")[1],s=new L.LatLng(n,a);e.setLatLng(s),e.data=t[o]}else{var n=t[o].driverLatLong.split(",")[0],a=t[o].driverLatLong.split(",")[1],r=L.marker([n,a],{icon:L.mapbox.marker.icon({"marker-size":"large","marker-symbol":"scooter","marker-color":"#009900"}),bounceOnAdd:!0,bounceOnAddOptions:{duration:500,height:100}});r.bindPopup('<h3 class="popup-header">'+t[o].driverName+'</h3><p class="popup-text">'+t[o].driverNoTelp+'</p><p class="popup-text">'+t[o].driverTypeName+"</p>"),r.addTo(h),r.data=t[o],p.push(r)}}else for(var o=0;o<t.length;++o){var n=t[o].driverLatLong.split(",")[0],a=t[o].driverLatLong.split(",")[1],r=L.marker([n,a],{icon:L.mapbox.marker.icon({"marker-size":"large","marker-symbol":"scooter","marker-color":"#009900"}),bounceOnAdd:!0,bounceOnAddOptions:{duration:500,height:100}});r.bindPopup('<h3 class="popup-header">'+t[o].driverName+'</h3><p class="popup-text">'+t[o].driverNoTelp+'</p><p class="popup-text">'+t[o].driverTypeName+"</p>"),r.addTo(h),r.data=t[o],p.push(r)}}),n(h.getCenter()),$("#welcomeModal").modal({backdrop:"static",keyboard:!1}),$("#welcomeModal").on("hidden.bs.modal",function(){h.locate({watch:!0,enableHighAccuracy:!0})}),h.on("locationfound",function(t){a=t.latlng,c&&(s=L.userMarker(a,{pulsing:!0,smallIcon:!0}),s.addTo(h),h.panTo(a),c=!1),s.setLatLng(a)}),"undefined"==typeof console||"function"!=typeof console.log||window.test||console.log("\r\n%c                     *      .--.\r\n%c                           / /  `\r\n%c          +               | |\r\n%c                 '         \\ \\__,\r\n%c             *          +   '--'  *\r\n%c                 +   /\\\r\n%c    +              .'  '.   *\r\n%c           *      /======\\      +\r\n%c                 ;:.  _   ;\r\n%c                 |:. (_)  |\r\n%c                 |:.  _   |\r\n%c       +         |:. (_)  |          *\r\n%c                 ;:.      ;\r\n%c               .' \\:.    / `.\r\n%c              / .-'':._.'`-. \\\r\n%c              |/    /||\\    \\|\r\n%c            _..--\"\"\"````\"\"\"--.._\r\n%c      _.-'``                    ``'-._\r\n%c    -'         %cAnjinglah maneh%c        '-\r\n%c","color:#D0E3F1","color:#D0E3F1","color:#C0DAEC","color:#C0DAEC","color:#B0D1E8","color:#B0D1E8","color:#A1C7E3","color:#A1C7E3","color:#91BEDE","color:#91BEDE","color:#81B5D9","color:#81B5D9","color:#72ABD5","color:#72ABD5","color:#62A2D0","color:#62A2D0","color:#5299CB","color:#5299CB","color:#4390C7","color:#4390C7","color:#4390C7","color: #000000")},{"./lib/bouncemarker":2,"./lib/easybutton":3,"./lib/usermarker":4}],2:[function(t,o,e){!function(){var t=L.Marker.prototype.onAdd,o=L.Marker.prototype.onRemove;L.Marker.mergeOptions({bounceOnAdd:!1,bounceOnAddOptions:{duration:1e3,height:-1},bounceOnAddCallback:function(){}}),L.Marker.include({_toPoint:function(t){return this._map.latLngToContainerPoint(t)},_toLatLng:function(t){return this._map.containerPointToLatLng(t)},_motionStep:function(t){var o=this,e=new Date;o._intervalId=setInterval(function(){var n=new Date-e,i=n/t.duration;i>1&&(i=1);var a=t.delta(i);t.step(a),1===i&&(t.end(),clearInterval(o._intervalId))},t.delay||10)},_bounceMotion:function(t,o,e){var n=L.latLng(this._origLatlng),i=this._dropPoint.y,a=this._dropPoint.x,s=this._point.y-i,r=this;this._motionStep({delay:10,duration:o||1e3,delta:t,step:function(t){r._dropPoint.y=i+s*t-(r._map.project(r._map.getCenter()).y-r._origMapCenter.y),r._dropPoint.x=a-(r._map.project(r._map.getCenter()).x-r._origMapCenter.x),r.setLatLng(r._toLatLng(r._dropPoint))},end:function(){r.setLatLng(n),"function"==typeof e&&e()}})},_easeOutBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounce:function(t,o){this._origLatlng=this.getLatLng(),this._bounce(t,o)},_bounce:function(t,o){"function"==typeof t&&(o=t,t=null),t=t||{duration:1e3,height:-1},"number"==typeof t&&(t.duration=arguments[0],t.height=arguments[1]),this._origMapCenter=this._map.project(this._map.getCenter()),this._dropPoint=this._getDropPoint(t.height),this._bounceMotion(this._easeOutBounce,t.duration,o)},_getDropPoint:function(t){this._point=this._toPoint(this._origLatlng);var o;return o=void 0===t||0>t?this._toPoint(this._map.getBounds()._northEast).y:this._point.y-t,new L.Point(this._point.x,o)},onAdd:function(o){this._map=o,this._origLatlng=this._latlng,this.options.bounceOnAdd===!0&&("undefined"!=typeof this.options.bounceOnAddDuration&&(this.options.bounceOnAddOptions.duration=this.options.bounceOnAddDuration),"undefined"!=typeof this.options.bounceOnAddHeight&&(this.options.bounceOnAddOptions.height=this.options.bounceOnAddHeight),this._dropPoint=this._getDropPoint(this.options.bounceOnAddOptions.height),this.setLatLng(this._toLatLng(this._dropPoint))),t.call(this,o),this.options.bounceOnAdd===!0&&this._bounce(this.options.bounceOnAddOptions,this.options.bounceOnAddCallback)},onRemove:function(t){clearInterval(this._intervalId),o.call(this,t)}})}()},{}],3:[function(t,o,e){!function(){function t(t,e){this.title=t.title,this.stateName=t.stateName?t.stateName:"unnamed-state",this.icon=L.DomUtil.create("span",""),L.DomUtil.addClass(this.icon,"button-state state-"+this.stateName.trim()),this.icon.innerHTML=o(t.icon),this.onClick=L.Util.bind(t.onClick?t.onClick:function(){},e)}function o(t){var o;return t.match(/[&;=<>"']/)?o=t:(t=t.trim(),o=L.DomUtil.create("span",""),0===t.indexOf("fa-")?L.DomUtil.addClass(o,"fa "+t):0===t.indexOf("glyphicon-")?L.DomUtil.addClass(o,"glyphicon "+t):L.DomUtil.addClass(o,t),o=o.outerHTML),o}L.Control.EasyBar=L.Control.extend({options:{position:"topleft",id:null,leafletClasses:!0},initialize:function(t,o){o&&L.Util.setOptions(this,o),this._buildContainer(),this._buttons=[];for(var e=0;e<t.length;e++)t[e]._bar=this,t[e]._container=t[e].button,this._buttons.push(t[e]),this.container.appendChild(t[e].button)},_buildContainer:function(){this._container=this.container=L.DomUtil.create("div",""),this.options.leafletClasses&&L.DomUtil.addClass(this.container,"leaflet-bar easy-button-container leaflet-control"),this.options.id&&(this.container.id=this.options.id)},enable:function(){return L.DomUtil.addClass(this.container,"enabled"),L.DomUtil.removeClass(this.container,"disabled"),this.container.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.container,"disabled"),L.DomUtil.removeClass(this.container,"enabled"),this.container.setAttribute("aria-hidden","true"),this},onAdd:function(){return this.container},addTo:function(t){this._map=t;for(var o=0;o<this._buttons.length;o++)this._buttons[o]._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return L.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this}}),L.easyBar=function(){for(var t=[L.Control.EasyBar],o=0;o<arguments.length;o++)t.push(arguments[o]);return new(Function.prototype.bind.apply(L.Control.EasyBar,t))},L.Control.EasyButton=L.Control.extend({options:{position:"topleft",id:null,type:"replace",states:[],leafletClasses:!0},initialize:function(o,e,n){this.options.states=[],this.storage={},"object"==typeof arguments[arguments.length-1]&&L.Util.setOptions(this,arguments[arguments.length-1]),0===this.options.states.length&&"string"==typeof o&&"function"==typeof e&&this.options.states.push({icon:o,onClick:e,title:"string"==typeof n?n:""}),this._states=[];for(var i=0;i<this.options.states.length;i++)this._states.push(new t(this.options.states[i],this));this._buildButton(),this._activateState(this._states[0])},_buildButton:function(){if(this.button=L.DomUtil.create("button",""),this.options.id&&(this.button.id=this.options.id),this.options.leafletClasses&&L.DomUtil.addClass(this.button,"easy-button-button leaflet-bar-part"),L.DomEvent.addListener(this.button,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.button,"click",function(t){L.DomEvent.stop(t),this._currentState.onClick(this,this._map?this._map:null),this._map.getContainer().focus()},this),"replace"==this.options.type)this.button.appendChild(this._currentState.icon);else for(var t=0;t<this._states.length;t++)this.button.appendChild(this._states[t].icon)},_currentState:{stateName:"unnamed",icon:function(){return document.createElement("span")}()},_states:null,state:function(t){return"string"==typeof t?this._activateStateNamed(t):"number"==typeof t&&this._activateState(this._states[t]),this},_activateStateNamed:function(t){for(var o=0;o<this._states.length;o++)this._states[o].stateName==t&&this._activateState(this._states[o])},_activateState:function(t){if(t!==this._currentState){"replace"==this.options.type&&(this.button.appendChild(t.icon),this.button.removeChild(this._currentState.icon)),t.title?this.button.title=t.title:this.button.removeAttribute("title");for(var o=0;o<this._states.length;o++)L.DomUtil.removeClass(this._states[o].icon,this._currentState.stateName+"-active"),L.DomUtil.addClass(this._states[o].icon,t.stateName+"-active");L.DomUtil.removeClass(this.button,this._currentState.stateName+"-active"),L.DomUtil.addClass(this.button,t.stateName+"-active"),this._currentState=t}},enable:function(){return L.DomUtil.addClass(this.button,"enabled"),L.DomUtil.removeClass(this.button,"disabled"),this.button.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.button,"disabled"),L.DomUtil.removeClass(this.button,"enabled"),this.button.setAttribute("aria-hidden","true"),this},removeFrom:function(t){return this._container.parentNode.removeChild(this._container),this._map=null,this},onAdd:function(){var t=L.easyBar([this],{position:this.options.position,leafletClasses:this.options.leafletClasses});return this._container=t.container,this._container}}),L.easyButton=function(){var t=Array.prototype.concat.apply([L.Control.EasyButton],arguments);return new(Function.prototype.bind.apply(L.Control.EasyButton,t))}}()},{}],4:[function(t,o,e){!function(t){var o=L.divIcon({className:"leaflet-usermarker",iconSize:[34,34],iconAnchor:[17,17],popupAnchor:[0,-20],labelAnchor:[11,-3],html:""}),e=L.divIcon({className:"leaflet-usermarker",iconSize:[34,34],iconAnchor:[17,17],popupAnchor:[0,-20],labelAnchor:[11,-3],html:'<i class="pulse"></i>'}),n=L.divIcon({className:"leaflet-usermarker-small",iconSize:[17,17],iconAnchor:[9,9],popupAnchor:[0,-10],labelAnchor:[3,-4],html:""}),i=L.divIcon({className:"leaflet-usermarker-small",iconSize:[17,17],iconAnchor:[9,9],popupAnchor:[0,-10],labelAnchor:[3,-4],html:'<i class="pulse"></i>'}),a={stroke:!1,color:"#03f",weight:3,opacity:.5,fillOpacity:.15,fillColor:"#03f",clickable:!1};L.UserMarker=L.Marker.extend({options:{pulsing:!1,smallIcon:!1,accuracy:0,circleOpts:a},initialize:function(t,o){o=L.Util.setOptions(this,o),this.setPulsing(this.options.pulsing),this._accMarker=L.circle(t,this.options.accuracy,this.options.circleOpts),L.Marker.prototype.initialize.call(this,t,this.options),this.on("move",function(){this._accMarker.setLatLng(this.getLatLng())}).on("remove",function(){this._map.removeLayer(this._accMarker)})},setPulsing:function(t){this._pulsing=t,this.setIcon(this.options.smallIcon?this._pulsing?i:n:this._pulsing?e:o)},setAccuracy:function(t){this._accuracy=t,this._accMarker?this._accMarker.setRadius(t):this._accMarker=L.circle(this._latlng,t,this.options.circleOpts).addTo(this._map)},onAdd:function(t){L.Marker.prototype.onAdd.call(this,t),this._accMarker.addTo(t)}}),L.userMarker=function(t,o){return new L.UserMarker(t,o)}}(window)},{}]},{},[1]);